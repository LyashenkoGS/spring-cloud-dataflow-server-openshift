apiVersion: v1
kind: List
items:
- apiVersion: v1
  kind: ReplicationController
  metadata:
    name: kafka
  spec:
    replicas: 1
    selector:
      name: kafka
    template:
      metadata:
        labels:
          name: kafka
      spec:
        containers:
        - name: kafka
          image: spotify/kafka
          ports:
          - containerPort: 9092
          - containerPort: 2181
          env:
          - name: ADVERTISED_HOST
            valueFrom:
              fieldRef:
                fieldPath: status.podIP
          - name: ADVERTISED_PORT
            value: '9092'
- apiVersion: v1
  kind: Service
  metadata:
    name: kafka
    labels:
      spring-cloud-service: kafka
  spec:
    ports:
    - port: 9092
      targetPort: 9092
      protocol: TCP
    selector:
      name: kafka
- apiVersion: v1
  kind: Service
  metadata:
    name: zk
    labels:
      spring-cloud-service: zk
  spec:
    ports:
    - port: 2181
      targetPort: 2181
      protocol: TCP
    selector:
      name: kafka
